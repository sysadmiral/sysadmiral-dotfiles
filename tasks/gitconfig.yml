---

- name: create git config includes directory
  ansible.builtin.file:
    path: "{{ ansible_env.HOME }}/.gitconfig.d"
    state: directory
    mode: 0755

- name: copy git config includes files
  ansible.builtin.file:
    src: "{{ playbook_dir }}/files/dotfiles/_gitconfig_{{ item }}"
    dest: "{{ ansible_env.HOME }}/.gitconfig.d/gitconfig-{{ item }}"
    state: link
    force: yes
  with_items:
    - personal
    - work

- name: set git name
  community.general.git_config:
    name: user.name
    scope: global
    value: "Amo Chumber"

- name: set git email
  community.general.git_config:
    name: user.email
    scope: global
    value: "amo@sysadmiral.xyz"

- name: set pull to be rebase based
  community.general.git_config:
    name: pull.rebase
    scope: global
    value: "true"
